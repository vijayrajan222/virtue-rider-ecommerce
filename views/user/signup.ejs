<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/tailwindcss/output.css" />
    <title>User Signup | VIRTUE Helmets</title>
    <!-- Google Sign-In -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
    <style>
      body {
        background-color: #f5f5f5;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      
      .split-screen {
        display: grid;
        grid-template-columns: 1fr;
        min-height: 100vh;
      }
      
      @media (min-width: 1024px) {
        .split-screen {
          grid-template-columns: 1.2fr 0.8fr;
        }
      }
      
      .helmet-bg {
        background-color: #000000;
        position: relative;
        overflow: hidden;
      }
      
      .helmet-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        opacity: 0.7;
      }
      
      .content-wrapper {
        position: relative;
        z-index: 2;
      }
      
      .form-container {
        background: #ffffff;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      }
      
      .input-group {
        position: relative;
        margin-bottom: 1.5rem;
      }
      
      .input-group label {
        position: absolute;
        top: -10px;
        left: 10px;
        background-color: white;
        padding: 0 8px;
        font-size: 0.875rem;
        color: #4b5563;
        transition: all 0.2s ease;
      }
      
      .input-group input {
        width: 100%;
        padding: 0.75rem 1rem 0.75rem 3rem;
        border: 2px solid #e5e7eb;
        border-radius: 0.5rem;
        font-size: 1rem;
        transition: all 0.2s ease;
      }
      
      .input-group input:focus {
        border-color: #000;
        box-shadow: 0 0 0 3px rgba(0,0,0,0.1);
        outline: none;
      }
      
      .input-group .icon {
        position: absolute;
        left: 1rem;
        top: 50%;
        transform: translateY(-50%);
        color: #9ca3af;
      }
      
      .btn-primary {
        background: linear-gradient(90deg, #000000 0%, #333333 100%);
        color: white;
        border: none;
        border-radius: 0.5rem;
        padding: 0.875rem 1.5rem;
        font-weight: 600;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }
      
      .btn-primary::after {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: all 0.6s ease;
      }
      
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      }
      
      .btn-primary:hover::after {
        left: 100%;
      }
      
      .social-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        font-weight: 500;
        transition: all 0.3s ease;
        border: 2px solid #e5e7eb;
      }
      
      .social-btn:hover {
        background-color: #f3f4f6;
        transform: translateY(-2px);
      }
      
      .divider {
        display: flex;
        align-items: center;
        margin: 2rem 0;
      }
      
      .divider::before,
      .divider::after {
        content: '';
        flex: 1;
        border-bottom: 1px solid #e5e7eb;
      }
      
      .divider-text {
        padding: 0 1rem;
        color: #9ca3af;
      }
      
      .otp-input {
        width: 40px;
        height: 50px;
        text-align: center;
        font-size: 1.25rem;
        border: 2px solid #e5e7eb;
        border-radius: 0.5rem;
      }
      
      .otp-input:focus {
        border-color: #000;
        box-shadow: 0 0 0 3px rgba(0,0,0,0.1);
        outline: none;
      }
      
      .feature-badge {
        display: inline-flex;
        align-items: center;
        background: rgba(255,255,255,0.1);
        padding: 0.5rem 1rem;
        border-radius: 2rem;
        margin-right: 0.5rem;
        margin-bottom: 0.5rem;
      }
      
      .feature-badge i {
        margin-right: 0.5rem;
      }
      
      .overlay-gradient {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 100%);
        z-index: 1;
      }
    </style>
  </head>

  <body>
    <div class="split-screen">
      <!-- Left side - Helmet/Rider Image -->
      <div id="bgContainer" class="helmet-bg">
        <!-- Direct embedded image -->
        <img src="https://images.unsplash.com/photo-1558981852-426c6c22a060?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" 
             alt="Motorcycle Rider with Helmet" 
             class="helmet-image">
        
        <!-- Fallback image if the above fails -->
        <img src="https://images.pexels.com/photos/2531353/pexels-photo-2531353.jpeg" 
             alt="Motorcycle Helmet" 
             class="helmet-image" 
             style="display:none;" 
             onerror="this.style.display='block'; document.querySelector('.helmet-image').style.display='none';">
        
        <div class="overlay-gradient"></div>
        
        <div class="content-wrapper h-full flex flex-col justify-between p-8 md:p-12">
          <div>
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-4">VIRTUE<br>HELMETS</h1>
            <p class="text-xl text-white/80">Safety meets style.</p>
          </div>
          
          <div class="mt-8">
            <div class="feature-badge">
              <i class="fas fa-shield-alt text-white"></i>
              <span class="text-white">Safety Certified</span>
            </div>
            
            <div class="feature-badge">
              <i class="fas fa-star text-white"></i>
              <span class="text-white">VIRTUE Quality</span>
            </div>
            
            <div class="feature-badge">
              <i class="fas fa-truck text-white"></i>
              <span class="text-white">Free Shipping</span>
            </div>
            
            <div class="feature-badge">
              <i class="fas fa-medal text-white"></i>
              <span class="text-white">Warranty</span>
            </div>
          </div>
          
          <div class="text-white/90 text-sm">
            <p>© 2023 VIRTUE Helmets. All rights reserved.</p>
          </div>
        </div>
      </div>
      
      <!-- Right side - Signup Form -->
      <div class="form-container flex items-center justify-center p-6 md:p-12">
        <div class="w-full max-w-md">
          <div class="text-center mb-8">
            <div class="logo-container mb-4">
              <img src="/images/blacklogo.png" alt="VIRTUE Helmets Logo" class="h-16 mx-auto">
            </div>
            <h2 class="text-3xl font-bold text-gray-900">Create Account</h2>
            <p class="text-gray-600 mt-2">Join the VIRTUE Helmets family</p>
          </div>
          
          <form id="signup-form" class="space-y-4" novalidate>
            <div class="input-group">
              <label for="firstName">First Name</label>
              <i class="fas fa-user icon"></i>
              <input type="text" id="firstName" name="firstName" placeholder="John" required minlength="3" maxlength="50">
              <p id="firstNameError" class="text-red-500 text-xs mt-1 hidden"></p>
            </div>
            
            <div class="input-group">
              <label for="lastName">Last Name</label>
              <i class="fas fa-user icon"></i>
              <input type="text" id="lastName" name="lastName" placeholder="Doe" required minlength="1" maxlength="50">
              <p id="lastNameError" class="text-red-500 text-xs mt-1 hidden"></p>
            </div>
            
            <div class="input-group">
              <label for="email">Email Address</label>
              <i class="fas fa-envelope icon"></i>
              <input type="email" id="email" name="email" placeholder="your@email.com" required>
              <p id="emailError" class="text-red-500 text-xs mt-1 hidden"></p>
            </div>
            
            <div class="input-group">
              <label for="password">Password</label>
              <i class="fas fa-lock icon"></i>
              <input type="password" id="password" name="password" placeholder="••••••••" required minlength="8" maxlength="12">
              <button type="button" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-600">
                <i class="fa-regular fa-eye"></i>
              </button>
              <p id="passwordError" class="text-red-500 text-xs mt-1 hidden"></p>
            </div>
            
            <div class="input-group">
              <label for="confirmPassword">Confirm Password</label>
              <i class="fas fa-lock icon"></i>
              <input type="password" id="confirmPassword" name="confirmPassword" placeholder="••••••••" required minlength="8" maxlength="12">
              <button type="button" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-600">
                <i class="fa-regular fa-eye"></i>
              </button>
              <p id="confirmPasswordError" class="text-red-500 text-xs mt-1 hidden"></p>
            </div>
            
            <div id="generalError" class="text-red-500 text-sm mt-2 hidden"></div>
            
            <button type="submit" class="w-full btn-primary">
              Create Account
            </button>
          </form>
          
          <!-- Divider -->
          <div class="divider">
            <div class="divider-text">or continue with</div>
          </div>
          
          <!-- Social Login -->
          <div class="space-y-3">
            <a href="/auth/google?trigger=signup" class="w-full social-btn">
              <i class="fa-brands fa-google mr-2" style="color: #DB4437"></i>
              <span>Google</span>
            </a>
          </div>
          
          <div class="mt-8 text-center">
            <p class="text-gray-600">Already have an account? 
              <a href="/login" class="text-black font-medium hover:underline">Sign In</a>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loading-spinner" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
      <div class="bg-white p-5 rounded-lg flex flex-col items-center">
        <div class="w-10 h-10 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mb-3"></div>
        <p class="text-gray-700">Processing...</p>
      </div>
    </div>

    <!-- OTP Modal -->
    <div id="otpModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white p-8 rounded-lg shadow-xl max-w-md w-full m-4">
        <h2 class="text-2xl font-semibold text-center mb-6">Verify Your Email</h2>
        <p class="text-gray-600 text-center mb-6">Please enter the 6-digit code sent to your email.</p>
        
        <div class="flex justify-center space-x-2 mb-6">
          <% for(let i = 0; i < 6; i++) { %>
            <input type="text" maxlength="1" class="otp-input" />
          <% } %>
        </div>
        
        <p id="otpError" class="text-red-600 text-sm text-center mb-4 hidden"></p>
        
        <button id="verifyOtp" class="w-full btn-primary">
          Verify OTP
        </button>
        
        <div class="text-center mt-4">
          <button id="resendOtp" class="text-blue-600 hover:underline">Resend OTP</button>
          <div id="resendTimer" class="text-sm text-gray-600 mt-1 hidden"></div>
        </div>
      </div>
    </div>

    <script src="/javascript/user/signup.js" defer></script>
  </body>
</html>
