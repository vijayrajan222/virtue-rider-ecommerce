<!-- sidebar.ejs -->
<aside class="fixed top-0 left-0 w-64 h-full bg-gray-900 bg-opacity-95 p-5 shadow-xl md:block hidden z-50 overflow-y-auto border-r border-gray-800">
  <!-- Logo -->
  <div class="flex items-center justify-center mb-8">
    <img src="/images/whitelogo.png" alt="Virtue Rider Logo" class="h-8 md:h-10 lg:h-12" />
  </div>

  <!-- Navigation Links -->
  <nav class="space-y-2 md:space-y-4" aria-label="Main Navigation">
    <a href="/admin/dashboard" 
       class="flex items-center space-x-3 text-gray-400 hover:text-orange-500 transition-colors p-2 rounded-lg hover:bg-gray-800/50 group <%= path === '/admin/dashboard' ? 'bg-gray-800/50 text-orange-500' : '' %>">
      <i class="material-icons text-lg md:text-xl lg:text-2xl group-hover:rotate-12 transition-transform">speed</i>
      <span class="text-sm md:text-base">Dashboard</span>
    </a>

    <a href="/admin/products" 
       class="flex items-center space-x-3 text-gray-400 hover:text-orange-500 transition-colors p-2 rounded-lg hover:bg-gray-800/50 group <%= path === '/admin/products' ? 'bg-gray-800/50 text-orange-500' : '' %>">
      <i class="material-icons text-lg md:text-xl lg:text-2xl group-hover:rotate-12 transition-transform">two_wheeler</i>
      <span class="text-sm md:text-base">Products</span>
    </a>

    <a href="/admin/users" 
       class="flex items-center space-x-3 text-gray-400 hover:text-orange-500 transition-colors p-2 rounded-lg hover:bg-gray-800/50 group <%= path === '/admin/users' ? 'bg-gray-800/50 text-orange-500' : '' %>">
      <i class="material-icons text-lg md:text-xl lg:text-2xl group-hover:rotate-12 transition-transform">sports_motorsports</i>
      <span class="text-sm md:text-base">Users</span>
    </a>

    <a href="/admin/categories" 
       class="flex items-center space-x-3 text-gray-400 hover:text-orange-500 transition-colors p-2 rounded-lg hover:bg-gray-800/50 group <%= path === '/admin/categories' ? 'bg-gray-800/50 text-orange-500' : '' %>">
      <i class="material-icons text-lg md:text-xl lg:text-2xl group-hover:rotate-12 transition-transform">garage</i>
      <span class="text-sm md:text-base">Categories</span>
    </a>

    <a href="/admin/orders" 
       class="flex items-center space-x-3 text-gray-400 hover:text-orange-500 transition-colors p-2 rounded-lg hover:bg-gray-800/50 group <%= path === '/admin/orders' ? 'bg-gray-800/50 text-orange-500' : '' %>">
      <i class="material-icons text-lg md:text-xl lg:text-2xl group-hover:rotate-12 transition-transform">delivery_dining</i>
      <span class="text-sm md:text-base">Orders</span>
    </a>

    <a href="/admin/offers" 
       class="flex items-center space-x-3 text-gray-400 hover:text-orange-500 transition-colors p-2 rounded-lg hover:bg-gray-800/50 group <%= path === '/admin/offers' ? 'bg-gray-800/50 text-orange-500' : '' %>">
      <i class="material-icons text-lg md:text-xl lg:text-2xl group-hover:rotate-12 transition-transform">bolt</i>
      <span class="text-sm md:text-base">Offers</span>
    </a>

    <a href="/admin/coupons" 
       class="flex items-center space-x-3 text-gray-400 hover:text-orange-500 transition-colors p-2 rounded-lg hover:bg-gray-800/50 group <%= path === '/admin/coupons' ? 'bg-gray-800/50 text-orange-500' : '' %>">
      <i class="material-icons text-lg md:text-xl lg:text-2xl group-hover:rotate-12 transition-transform">redeem</i>
      <span class="text-sm md:text-base">Coupons</span>
    </a>

    <a href="/admin/sales-report" 
       class="flex items-center space-x-3 text-gray-400 hover:text-orange-500 transition-colors p-2 rounded-lg hover:bg-gray-800/50 group <%= path === '/admin/sales-report' ? 'bg-gray-800/50 text-orange-500' : '' %>">
      <i class="material-icons text-lg md:text-xl lg:text-2xl group-hover:rotate-12 transition-transform">trending_up</i>
      <span class="text-sm md:text-base">Sales Report</span>
    </a>

    <a href="/admin/logout" 
       class="flex items-center space-x-3 text-gray-400 hover:text-red-500 transition-colors p-2 rounded-lg hover:bg-gray-800/50 group mt-8">
      <i class="material-icons text-lg md:text-xl lg:text-2xl group-hover:rotate-12 transition-transform">power_settings_new</i>
      <span class="text-sm md:text-base">Logout</span>
    </a>
  </nav>
</aside>

<!-- Mobile Header and Sidebar -->
<div class="md:hidden">
  <!-- Mobile Header -->
  <header class="fixed top-0 left-0 w-full bg-gray-900 text-white p-3 flex justify-between items-center z-50 shadow-lg">
    <button id="sidebar-toggle" 
            class="text-white focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:ring-offset-gray-900 rounded-lg p-1"
            aria-label="Toggle Menu"
            aria-expanded="false">
      <i class="material-icons text-2xl">menu</i>
    </button>
    <img src="/images/whitelogo.png" alt="Virtue Rider Logo" class="h-6" />
  </header>

  <!-- Add spacing div for mobile -->
  <div class="h-14 md:hidden"><!-- Spacer for mobile header --></div>

  <!-- Mobile Sidebar -->
  <div id="mobileSidebar" class="fixed inset-0 transform -translate-x-full transition-transform duration-300 ease-in-out md:hidden z-50">
    <div class="bg-gray-900 bg-opacity-95 w-64 h-full overflow-y-auto border-r border-gray-800">
      <!-- Mobile sidebar content (same as desktop) -->
      <!-- ... copy the same content as above ... -->
    </div>
  </div>
</div>

<!-- Mobile Sidebar Overlay -->
<div id="sidebar-overlay" 
     class="fixed inset-0 bg-black bg-opacity-50 hidden md:hidden z-30" 
     aria-hidden="true">
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const sidebarToggle = document.getElementById("sidebar-toggle");
    const mobileSidebar = document.getElementById("mobileSidebar");
    const sidebarOverlay = document.getElementById("sidebar-overlay");

    function toggleSidebar() {
      const isExpanded = sidebarToggle.getAttribute("aria-expanded") === "true";
      sidebarToggle.setAttribute("aria-expanded", !isExpanded);
      mobileSidebar.classList.toggle("-translate-x-full");
      mobileSidebar.setAttribute("aria-hidden", isExpanded);
      sidebarOverlay.classList.toggle("hidden");
      document.body.classList.toggle("overflow-hidden");
    }

    if (sidebarToggle && mobileSidebar && sidebarOverlay) {
      sidebarToggle.addEventListener("click", toggleSidebar);
      sidebarOverlay.addEventListener("click", toggleSidebar);

      // Close sidebar when clicking outside
      document.addEventListener("click", function (event) {
        if (!mobileSidebar.contains(event.target) && 
            !sidebarToggle.contains(event.target) && 
            !mobileSidebar.classList.contains("-translate-x-full")) {
          toggleSidebar();
        }
      });

      // Handle escape key
      document.addEventListener("keydown", function (event) {
        if (event.key === "Escape" && 
            !mobileSidebar.classList.contains("-translate-x-full")) {
          toggleSidebar();
        }
      });
    }
  });
</script>
